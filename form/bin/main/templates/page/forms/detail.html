<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{UI/layouts/user/main_layout}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì„¤ë¬¸ ìƒì„¸ì •ë³´ ì‘ì„± - ìˆ˜í˜¸ëŒ€í–‰</title>
  <!-- Flatpickr CSS for multi-date selection -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <style>
    .container {
      max-width: 768px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .form-section {
      background: white;
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .section-title {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 20px;
      color: #333;
      border-bottom: 2px solid #007bff;
      padding-bottom: 10px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: #555;
    }
    
    .required::after {
      content: " *";
      color: #dc3545;
    }
    
    .form-control {
      width: 100%;
      padding: 12px;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s ease;
    }
    
    .form-control:focus {
      outline: none;
      border-color: #007bff;
    }
    
    .form-row {
      display: flex;
      gap: 15px;
    }
    
    .form-col {
      flex: 1;
    }
    
    .radio-group {
      display: flex;
      gap: 20px;
      align-items: center;
    }
    
    .radio-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .radio-item input[type="radio"] {
      transform: scale(1.2);
    }
    
    .address-search {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    
    .btn {
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 18px;
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      white-space: nowrap;
    }
    
    .btn-search {
      background-color: #28a745;
      color: white;
    }
    
    .btn-search:hover {
      background-color: #218838;
    }
    
    .btn-container {
      text-align: center;
      margin-top: 40px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      justify-content: center;
    }
    
    .btn-primary {
      background-color: #007bff;
      color: white;
      flex: 1;
      max-width: 100%;
    }
    
    .btn-primary:hover {
      background-color: #0056b3;
    }
    
    .btn-secondary {
      background-color: #6c757d;
      color: white;
      flex: 1;
      max-width: 100%;
    }
    
    .btn-secondary:hover {
      background-color: #5a6268;
    }
    
    .textarea-control {
      resize: vertical;
      min-height: 100px;
    }
    
    .hidden {
      display: none;
    }
    
    .pay-methods {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    .pay-method {
      flex: 1;
      min-width: 150px;
    }
    
    .pay-method input[type="radio"] {
      display: none;
    }
    
    .pay-method label {
      display: block;
      padding: 15px;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      font-weight: 500;
    }
    
    .pay-method input[type="radio"]:checked + label {
      border-color: #007bff;
      background-color: #f8f9ff;
      color: #007bff;
    }
    
    /* ì„œë¹„ìŠ¤ ì˜µì…˜ ìŠ¤íƒ€ì¼ (index.htmlê³¼ ë™ì¼) */
    .service-options {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .service-option {
      flex: 1;
      min-width: 220px;
    }
    
    .service-option input[type="checkbox"],
    .service-option input[type="radio"] {
      display: none;
    }
    
    .service-option label {
      display: block;
      padding: 15px;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      font-weight: 500;
      position: relative;
    }
    
    .service-option input[type="checkbox"]:checked + label,
    .service-option input[type="radio"]:checked + label {
      border-color: #007bff;
      background-color: #f8f9ff;
      color: #007bff;
    }
    
    .service-option label::before {
      content: '';
      position: absolute;
      top: 10px;
      right: 10px;
      width: 20px;
      height: 20px;
      border: 2px solid #dee2e6;
      border-radius: 3px;
      background: white;
    }
    
    .service-option input[type="radio"] + label::before {
      border-radius: 50%;
    }
    
    .service-option input[type="checkbox"]:checked + label::before {
      background: #007bff;
      border-color: #007bff;
    }
    
    .service-option input[type="radio"]:checked + label::before {
      background: #007bff;
      border-color: #007bff;
    }
    
    .service-option input[type="checkbox"]:checked + label::after {
      content: 'âœ“';
      position: absolute;
      top: 12px;
      right: 15px;
      color: white;
      font-size: 14px;
      font-weight: bold;
    }
    
    .service-option input[type="radio"]:checked + label::after {
      content: '';
      position: absolute;
      top: 16px;
      right: 16px;
      width: 8px;
      height: 8px;
      background: white;
      border-radius: 50%;
    }
    
    @media (max-width: 576px) {
      .container {
        padding: 15px;
      }
      
      .form-row {
        flex-direction: column;
        gap: 0;
      }
      
      .radio-group {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .address-search {
        flex-direction: column;
        align-items: stretch;
      }
      
      .btn-container {
        flex-direction: column;
      }
      
      .pay-methods {
        flex-direction: column;
      }
      
      .service-options {
        flex-direction: column;
      }
      
      .service-option {
        min-width: auto;
      }
    }

    /* Flatpickr ë‹¤ì¤‘ì„ íƒ ë‚ ì§œ ìŠ¤íƒ€ì¼ */
    .flatpickr-calendar {
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    
    .flatpickr-day.selected {
      background: #007bff;
      border-color: #007bff;
      color: white;
    }
    
    .flatpickr-day.selected:hover {
      background: #0056b3;
      border-color: #0056b3;
    }
    
    #noiseDatePicker {
      cursor: pointer;
      background-color: white;
    }

    .service-notice {
      background: white;
      padding: 15px 20px;
      margin-bottom: 20px;
      border-radius: 8px;
    }
    
    .service-notice .notice-title {
      font-size: 22px;
      font-weight: 600;
      color: #007bff;
      margin-bottom: 5px;
    }
    
    .service-notice .notice-text {
      padding: 20px;
      font-size: 18px;
      color: #495057;
      line-height: 1.4;
    }
  </style>
</head>
<body layout:fragment="content">
  <div class="container">
    <form id="detailForm">

      <!-- ===================== ê³µí†µ ì–‘ì‹ ===================== -->
      <!-- ê³µì‚¬ ê¸°ê°„ -->
      <div class="form-section">
        <h3 class="section-title">ê³µì‚¬ ê¸°ê°„</h3>
        
        <div class="form-row">
          <div class="form-col">
            <div class="form-group">
              <label class="form-label required">ê³µì‚¬ ì‹œì‘ì¼</label>
              <input type="date" class="form-control" name="stdDate" required>
            </div>
          </div>
          <div class="form-col">
            <div class="form-group">
              <label class="form-label required">ê³µì‚¬ ì¢…ë£Œì¼</label>
              <input type="date" class="form-control" name="endDate" required>
            </div>
          </div>
        </div>
        
        <th:block th:if="${ ( formParams.firstServices != null && #strings.contains( formParams.firstServices, '1') ) || ( formParams.secondService != null && formParams.secondService != '' ) }">
          <div class="form-group">
            <label class="form-label required">ì†ŒìŒ ë°œìƒì¼ (ë‹¤ì¤‘ì„ íƒ)</label>
            <input type="text" class="form-control" id="noiseDatePicker" name="noiseDate" placeholder="ì†ŒìŒì´ ë°œìƒí•  ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”" readonly required>
            <p style="font-size: 14px; color: #6c757d; margin-top: 8px;">
              ì—¬ëŸ¬ ë‚ ì§œë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„ íƒëœ ë‚ ì§œë“¤ì€ ì‰¼í‘œë¡œ êµ¬ë¶„ë©ë‹ˆë‹¤.
            </p>
          </div>
        </th:block>


      </div>
      
      <!-- ê³µì‚¬ ìœ„ì¹˜ -->
      <div class="form-section">
        <h3 class="section-title">ê³µì‚¬ ìœ„ì¹˜</h3>
        
        <div class="form-group">
          <label class="form-label required">ì£¼ì†Œ</label>
          <div class="address-search">
            <input type="text" class="form-control" name="address" placeholder="ì£¼ì†Œë¥¼ ê²€ìƒ‰í•´ì£¼ì„¸ìš”" readonly required>
            <button type="button" class="btn btn-search" onclick="openAddressSearch()">ì£¼ì†Œ ê²€ìƒ‰</button>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label required">ìƒì„¸ì£¼ì†Œ</label>
          <input type="text" class="form-control" name="detailAddress" placeholder="ì˜ˆ) 101ë™ 101í˜¸" required>
        </div>
      </div>
      
      <!-- ì‹ ì²­ì¸ ì •ë³´ -->
      <div class="form-section">
        <h3 class="section-title">ì‹ ì²­ì¸ ì •ë³´</h3>
        
        <div class="form-row">
          <div class="form-col">
            <div class="form-group">
              <label class="form-label required">ì‹ ì²­ì¸ëª…</label>
              <input type="text" class="form-control" name="name" required placeholder="ì—°ë½ë°›ìœ¼ì‹¤ ë¶„">
            </div>
          </div>
          <div class="form-col">
            <div class="form-group">
              <label class="form-label required">ì‹ ì²­ì¸ ì „í™”ë²ˆí˜¸</label>
              <input type="tel" class="form-control" name="tel" placeholder="ì—°ë½ë°›ìœ¼ì‹¤ ì „í™”ë²ˆí˜¸ ì˜ˆ) 01012345678" required>
            </div>
          </div>
        </div>
      </div>

      <!-- ===================== (1) ì…ì£¼ë¯¼ë™ì˜ì„œ ê°œë³„ì–‘ì‹ ===================== -->
      <th:block th:if="${ formParams.firstServices != null && #strings.contains( formParams.firstServices, '1') }">
        <!-- ì„¸ëŒ€ì£¼ ì •ë³´ -->
        <div class="form-section">
          <h3 class="section-title">ì„¸ëŒ€ì£¼ ì •ë³´</h3>
          
          <div class="form-group">
            <label class="form-label required">ì‹ ì²­ì¸ê³¼ ë™ì¼ ì—¬ë¶€</label>
            <div class="radio-group">
              <div class="radio-item">
                <input type="radio" id="resident_same_y" name="residentSame" value="Y" required>
                <label for="resident_same_y">ì˜ˆ</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="resident_same_n" name="residentSame" value="N" required>
                <label for="resident_same_n">ì•„ë‹ˆì˜¤</label>
              </div>
            </div>
          </div>
          
          <div class="form-row" id="residentInfoGroup">
            <div class="form-col">
              <div class="form-group">
                <label class="form-label required">ì„¸ëŒ€ì£¼ëª…</label>
                <input type="text" class="form-control" name="residentName" required>
              </div>
            </div>
            <div class="form-col">
              <div class="form-group">
                <label class="form-label required">ì„¸ëŒ€ì£¼ ì „í™”ë²ˆí˜¸</label>
                <input type="tel" class="form-control" name="residentTel" placeholder="ì˜ˆ) 01012345678" required>
              </div>
            </div>
          </div>
        </div>

        <!-- ì—…ì²´ ì •ë³´ -->
        <div class="form-section">
          <h3 class="section-title">ì—…ì²´ ì •ë³´</h3>
          
          <div class="form-group" id="bizInfoGroup">
            <label class="form-label">ì—…ì²´ëª…</label>
            <input type="text" class="form-control" name="bizName" placeholder="ì—…ì²´ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
          </div>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-group">
                <label class="form-label">ëŒ€í‘œìëª…</label>
                <input type="text" class="form-control" name="managerName">
              </div>
            </div>
            <div class="form-col">
              <div class="form-group">
                <label class="form-label">ì—…ì²´ ì „í™”ë²ˆí˜¸</label>
                <input type="tel" class="form-control" name="managerTel" placeholder="ì˜ˆ) 01012345678">
              </div>
            </div>
          </div>
        </div>

        <!-- ë™ì˜ì„œ ì¡°ê±´ -->
        <div class="form-section">
          <h3 class="section-title">ë™ì˜ì„œ ì¡°ê±´</h3>
          
          <div class="form-group">
            <label class="form-label required">ê´€ë¦¬ì‚¬ë¬´ì†Œ ì¡°ê±´ í™•ì¸í•´ì£¼ì„¸ìš”</label>
            <div class="radio-group" style="margin-bottom: 10px;">
              <div class="radio-item">
                <input type="radio" id="agreement_condition_y" name="agreementConditionCheck" value="Y" required>
                <label for="agreement_condition_y">í™•ì¸ì™„ë£Œ</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="agreement_condition_n" name="agreementConditionCheck" value="N" required>
                <label for="agreement_condition_n">ë¯¸í™•ì¸</label>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label required" id="agreementTermsLabel">ë™ì˜ì„œ ì¡°ê±´</label>
            <p style="font-size: 14px; color: #6c757d; margin-bottom: 10px;">ì˜ˆ) 100ì„¸ëŒ€ ì¤‘ 50% 50ì„¸ëŒ€ ë™ì˜ í•„ìš” êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„± ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p>
            <textarea class="form-control textarea-control" rows="5" name="agreementTerms" placeholder="ê´€ë¦¬ì‚¬ë¬´ì†Œì—ì„œ ìš”êµ¬í•˜ëŠ” ë™ì˜ì„œ ì¡°ê±´ì„ ìƒì„¸íˆ ì…ë ¥í•´ì£¼ì„¸ìš”" required></textarea>
          </div>
        </div>

        <!-- ê³µì‚¬ ë‚´ìš© -->
        <div class="form-section">
          <h3 class="section-title">ê³µì‚¬ ë‚´ìš©</h3>
          
          <div class="form-group">
            <label class="form-label">ê³µì‚¬ ë‚´ìš©</label>
            <textarea class="form-control textarea-control" rows="10" name="content" placeholder="ê³µì‚¬ ë‚´ìš©ì„ ìƒì„¸íˆ ì…ë ¥í•´ì£¼ì„¸ìš”"></textarea>
          </div>
        </div>

        <!-- ì•ˆë‚´ ë©”ì‹œì§€ -->
        <div class="service-notice">
            <div class="notice-title">ğŸ“‹ ì•ˆë‚´ ë©”ì‹œì§€</div>
            <div class="notice-text">
              <h5>ê´€ë¦¬ì‚¬ë¬´ì†Œ ì–‘ì‹ì„œë¥¼ ë¯¸ë¦¬ ë°›ìœ¼ì‹  ê²½ìš°</h5>
              <p>1. ì‚¬ì§„ or ìŠ¤ìº”ë³¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤.<p>
              <p>2. í•´ë‹¹ì¸µ ì†Œí™”ì „ or ìš°í¸í•¨ì— ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p>
              
              
          </div>
        </div>
            
      </th:block>
      <!-- ===================== (1) ì…ì£¼ë¯¼ë™ì˜ì„œ ê°œë³„ì–‘ì‹ ===================== -->


      <!-- ===================== (2) ìŠ¹ê°•ê¸° ë° ê¸°íƒ€ë³´ì–‘ ê°œë³„ì–‘ì‹ ===================== -->
      <th:block th:if="${ formParams.firstServices != null && #strings.contains( formParams.firstServices, '2') }">
        <!-- í•„ìš”í•œ ë³´ì–‘ -->
        <div class="form-section">
          <h3 class="section-title">í•„ìš”í•œ ë³´ì–‘</h3>
          
          <div class="form-group">
            <label class="form-label required">í•„ìš”í•œ ë³´ì–‘ (ë‹¤ì¤‘ì„ íƒ)</label>
            <div class="service-options">
              <div class="service-option">
                <input type="checkbox" id="protection_all" name="protectionTypes" value="ì˜¬ë³´ì–‘">
                <label for="protection_all">
                  ì˜¬ë³´ì–‘
                  <div style="font-size: 12px; color: #6c757d; margin-top: 5px;">ì „ì²´ ë³´ì–‘ ì„œë¹„ìŠ¤</div>
                </label>
              </div>
              <div class="service-option">
                <input type="checkbox" id="protection_semi" name="protectionTypes" value="ì¤€ë³´ì–‘">
                <label for="protection_semi">
                  ì¤€ë³´ì–‘
                  <div style="font-size: 12px; color: #6c757d; margin-top: 5px;">ë¶€ë¶„ì  ë³´ì–‘ ì„œë¹„ìŠ¤</div>
                </label>
              </div>
              <div class="service-option">
                <input type="checkbox" id="protection_half" name="protectionTypes" value="í•˜í”„ë³´ì–‘">
                <label for="protection_half">
                  í•˜í”„ë³´ì–‘
                  <div style="font-size: 12px; color: #6c757d; margin-top: 5px;">ì ˆë°˜ ë³´ì–‘ ì„œë¹„ìŠ¤</div>
                </label>
              </div>
              <div class="service-option">
                <input type="checkbox" id="protection_other" name="protectionTypes" value="ê¸°íƒ€ë³´ì–‘(ë°”ë‹¥,ë²½)">
                <label for="protection_other">
                  ê¸°íƒ€ë³´ì–‘(ë°”ë‹¥,ë²½)
                  <div style="font-size: 12px; color: #6c757d; margin-top: 5px;">ë°”ë‹¥ ë° ë²½ë©´ ë³´ì–‘</div>
                </label>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">í•„ìš”í•œ ë³´ì–‘ ì„¤ëª…</label>
            <textarea class="form-control textarea-control" rows="5" name="protectionDescription" placeholder="í•„ìš”í•œ ë³´ì–‘ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"></textarea>
          </div>
        </div>

        <!-- ìŠ¹ê°•ê¸° ì™¸ë¶€ ë³´ì–‘ -->
        <div class="form-section">
          <h3 class="section-title">ìŠ¹ê°•ê¸° ì™¸ë¶€ ë³´ì–‘</h3>
          
          <div class="form-group">
            <label class="form-label">ìŠ¹ê°•ê¸° ì™¸ë¶€ ë³´ì–‘ì—¬ë¶€(ì ë³´ì–‘/ë™ì„ ë³´ì–‘ í•„ìš”ì—¬ë¶€)</label>
            <div class="radio-group">
              <div class="radio-item">
                <input type="radio" id="elevator_protection_y" name="elevatorProtection" value="Y">
                <label for="elevator_protection_y">ì˜ˆ</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="elevator_protection_n" name="elevatorProtection" value="N" checked>
                <label for="elevator_protection_n">ì•„ë‹ˆì˜¤</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="elevator_protection_a" name="elevatorProtection" value="A">
                <label for="elevator_protection_a">ê´€ë¦¬ì‚¬ë¬´ì†Œ ì¡°ê±´ëŒ€ë¡œ ì§„í–‰í•´ì£¼ì„¸ìš”</label>
              </div>
            </div>
            <p style="font-size: 14px; color: #6c757d; margin-top: 8px;">
              (ì¶”ê°€ê¸ˆì•¡ ë°œìƒë˜ë©° í•„ìš”í•˜ì‹  ê²½ìš°ë§Œ ì‹œê³µ ì¸µìˆ˜ ì‘ì„±í•´ ì£¼ì‹œë©´ ë˜ì‹­ë‹ˆë‹¤.)
            </p>
          </div>
          
          <div class="form-group" id="elevatorFloorsGroup" style="display: none;">
            <label class="form-label">ì‹œê³µ ì¸µìˆ˜</label>
            <input type="text" class="form-control" name="elevatorFloors" placeholder="ì‹œê³µí•  ì¸µìˆ˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”">
          </div>
        </div>

        <!-- í˜„ê´€ ì •ë³´ -->
        <div class="form-section">
          <h3 class="section-title">í˜„ê´€ ì •ë³´</h3>
          
          <div class="form-group">
            <label class="form-label">í˜„ê´€ ë¹„ë°€ë²ˆí˜¸</label>
            <input type="text" class="form-control" name="entrancePassword" placeholder="í˜„ê´€ ì¶œì…ì„ ìœ„í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”">
          </div>
        </div>

        <!-- ì•ˆë‚´ ë©”ì‹œì§€ -->
        <div class="service-notice">
          <div class="notice-title">ğŸ› ï¸ ì•ˆë‚´ ë©”ì‹œì§€</div>
          <div class="notice-text">
            <h5>ìŠ¹ê°•ê¸° ë° ê¸°íƒ€ë³´ì–‘ ì„œë¹„ìŠ¤ ì•ˆë‚´</h5>
            <p>1. ì˜¬ë³´ì–‘: ì „ì²´ ê³µê°„ ë³´ì–‘ ì‘ì—…</p>
            <p>2. ì¤€ë³´ì–‘: ì£¼ìš” ë¶€ë¶„ ë³´ì–‘ ì‘ì—…</p>
            <p>3. í•˜í”„ë³´ì–‘: ë¶€ë¶„ì  ë³´ì–‘ ì‘ì—…</p>
            <p>4. ê¸°íƒ€ë³´ì–‘: ë°”ë‹¥, ë²½ë©´ ë“± íŠ¹ì • ë¶€ìœ„ ë³´ì–‘</p>
            <br>
            <p><strong>âš ï¸ ìŠ¹ê°•ê¸° ì™¸ë¶€ ë³´ì–‘ ì‹œ ì¶”ê°€ ë¹„ìš©ì´ ë°œìƒë©ë‹ˆë‹¤.</strong></p>
          </div>
        </div>
      </th:block>
      <!-- ===================== (2) ìŠ¹ê°•ê¸° ë° ê¸°íƒ€ë³´ì–‘ ê°œë³„ì–‘ì‹ ===================== -->


      <!-- ===================== (3) í–‰ìœ„í—ˆê°€ ì‹ ì²­ì„œ ê°œë³„ì–‘ì‹ ===================== -->
      <th:block th:if="${ formParams.firstServices != null && #strings.contains( formParams.firstServices, '3') }">
        <!-- ë§¤ë¬¼ìƒíƒœ -->
        <div class="form-section">
          <h3 class="section-title">ë§¤ë¬¼ìƒíƒœ</h3>
          
          <div class="form-group">
            <label class="form-label required">ë§¤ë¬¼ìƒíƒœ ì„ íƒ</label>
            <div class="service-options" style="flex-direction: column;">
              <div class="service-option">
                <input type="radio" id="property_owner" name="propertyStatus" value="ì†Œìœ ì">
                <label for="property_owner">
                  ì†Œìœ ì
                  <div style="font-size: 12px; color: #6c757d; margin-top: 5px;">ë³¸ì¸ ì†Œìœ  ë¶€ë™ì‚°</div>
                </label>
              </div>
              <div class="service-option">
                <input type="radio" id="property_trading" name="propertyStatus" value="ë§¤ë§¤ì¤‘">
                <label for="property_trading">
                  ë§¤ë§¤ì¤‘
                  <div style="font-size: 12px; color: #6c757d; margin-top: 5px;">ë§¤ë§¤ ì§„í–‰ì¤‘ì¸ ë¶€ë™ì‚°</div>
                </label>
              </div>
              <div class="service-option">
                <input type="radio" id="property_presale" name="propertyStatus" value="ë¶„ì–‘ì¤‘">
                <label for="property_presale">
                  ë¶„ì–‘ì¤‘
                  <div style="font-size: 12px; color: #6c757d; margin-top: 5px;">ë¶„ì–‘ ì§„í–‰ì¤‘ì¸ ë¶€ë™ì‚°</div>
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- ê³µì‚¬ë²”ìœ„ -->
        <div class="form-section">
          <h3 class="section-title">ê³µì‚¬ë²”ìœ„</h3>
          
          <div class="form-group">
            <label class="form-label required">ê³µì‚¬ë²”ìœ„ ì„ íƒ (ë‹¤ì¤‘ì„ íƒ)</label>
            <div class="service-options">
              <div class="service-option">
                <input type="checkbox" id="construction_expansion" name="constructionScope" value="í™•ì¥">
                <label for="construction_expansion">
                  í™•ì¥
                  <div style="font-size: 12px; color: #6c757d; margin-top: 5px;">ê¸°ì¡´ ê³µê°„ í™•ì¥ ê³µì‚¬</div>
                </label>
              </div>
              <div class="service-option">
                <input type="checkbox" id="construction_wall_removal" name="constructionScope" value="ë¹„ë‚´ë ¥ë²½ ì² ê±°ë°ì‹ ì„¤">
                <label for="construction_wall_removal">
                  ë¹„ë‚´ë ¥ë²½ ì² ê±°ë°ì‹ ì„¤
                  <div style="font-size: 12px; color: #6c757d; margin-top: 5px;">ë¹„ë‚´ë ¥ë²½ ì œê±° ë° ìƒˆë¡œ ì„¤ì¹˜</div>
                </label>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">ê³µì‚¬ë²”ìœ„ ìƒì„¸ ì„¤ëª…</label>
            <textarea class="form-control textarea-control" rows="5" name="constructionScopeDescription" placeholder="ê³µì‚¬ë²”ìœ„ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"></textarea>
          </div>
        </div>


        <!-- ì•ˆë‚´ ë©”ì‹œì§€ -->
        <div class="service-notice">
          <div class="notice-title">ğŸ“Œ ì•ˆë‚´ ë©”ì‹œì§€</div>
          <div class="notice-text">
            <h5>í–‰ìœ„í—ˆê°€ ì‹ ì²­ì„œ ì²˜ë¦¬ ì•ˆë‚´</h5>
            <p><strong>ğŸ“Œ ì„œë¥˜ì™„ë¹„í›„ ì‘ì—…2ì¼, í—ˆê°€ì²˜ë¦¬ëŠ” í‰ê·  7ì¼ ì†Œìš” ë©ë‹ˆë‹¤ ğŸ“Œ</strong></p>
            <br>
            <p><strong>â–¶ ì‚¬ìš©ìŠ¹ì¸ì€ 1ë…„ì•ˆì— ì‹ ì²­ ì‹œ ë¬´ë£Œ</strong></p>
            <br>
            <p>â€¢ ì •í™•í•œ ë„ë©´ê³¼ ì„œë¥˜ê°€ ì¤€ë¹„ë˜ì–´ì•¼ ë¹ ë¥¸ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
            <p>â€¢ í—ˆê°€ ì¡°ê±´ì— ë”°ë¼ ì¶”ê°€ ì„œë¥˜ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
          </div>
        </div>
      </th:block>
      <!-- ===================== (3) í–‰ìœ„í—ˆê°€ ì‹ ì²­ì„œ ê°œë³„ì–‘ì‹ ===================== -->
      

      <!-- ===================== ê³µí†µ ì–‘ì‹ ===================== -->
      <!-- ìš”ì²­ ì‚¬í•­ -->
      <div class="form-section">
        <h3 class="section-title">ìš”ì²­ ì‚¬í•­</h3>
        
        <div class="form-group">
          <label class="form-label">ì¶”ê°€ ìš”ì²­ì‚¬í•­</label>
          <textarea class="form-control textarea-control" rows="5" name="request" placeholder="ì¶”ê°€ë¡œ ìš”ì²­í•˜ì‹¤ ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ìƒì„¸íˆ ì…ë ¥í•´ì£¼ì„¸ìš”"></textarea>
        </div>
      </div>
      <!-- ===================== ê³µí†µ ì–‘ì‹ ===================== -->
      
      
      
      
      
      <!-- ê²°ì œ ì •ë³´ -->
      <!-- ===================== ë³´ë¥˜ ===================== -->
      <!-- <div class="form-section">
        <h3 class="section-title">ê²°ì œ ì •ë³´</h3>
        
        <div class="form-group">
          <label class="form-label required">ê²°ì œ ë°©ë²•</label>
          <div class="pay-methods">
            <div class="pay-method">
              <input type="radio" id="pay_method_1" name="payMethod" value="1">
              <label for="pay_method_1">ë„¤ì´ë²„</label>
            </div>
            <div class="pay-method">
              <input type="radio" id="pay_method_2" name="payMethod" value="2">
              <label for="pay_method_2">ê³„ì¢Œì´ì²´</label>
            </div>
            <div class="pay-method">
              <input type="radio" id="pay_method_3" name="payMethod" value="3">
              <label for="pay_method_3">ê²°ì œì™„ë£Œ</label>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label required">ì´ë©”ì¼</label>
          <input type="email" class="form-control" name="email" placeholder="ì‘ì„± ê¸°ë¡ì„ ë°›ì„ ì´ë©”ì¼ ì£¼ì†Œ" required>
        </div>
      </div> -->
      <!-- ===================== ë³´ë¥˜ ===================== -->
      
      <!-- ë²„íŠ¼ -->
      <div class="btn-container">
        <button type="button" class="btn btn-secondary" onclick="history.back()">ì´ì „</button>
        <button type="button" class="btn btn-primary" onclick="submitForm()">ì ‘ìˆ˜í•˜ê¸°</button>
      </div>
    </form>
  </div>

  <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
  <!-- Flatpickr JS for multi-date selection -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // ë°ì´í„° ê°€ì ¸ì˜¤ê¸° - ë‘ ê°€ì§€ ë°©ì‹ ì§€ì›
      let firstServices, secondService, terms;
      
      // ë°©ë²• 1: ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì—ì„œ ì½ê¸°
      const urlParams = new URLSearchParams(window.location.search);
      const queryFirstServices = urlParams.get('firstServices');
      const querySecondService = urlParams.get('secondService');
      const queryTerms = urlParams.get('terms');
      
      // ë°©ë²• 2: sessionStorageì—ì„œ ì½ê¸°
      const sessionFirstServices = sessionStorage.getItem('firstServices');
      const sessionSecondService = sessionStorage.getItem('secondService');
      const sessionTerms = sessionStorage.getItem('terms');
      
      // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ìš°ì„ , ì—†ìœ¼ë©´ sessionStorage ì‚¬ìš©
      firstServices = queryFirstServices || sessionFirstServices;
      secondService = querySecondService || sessionSecondService;
      terms = queryTerms || sessionTerms;
      
      if (!firstServices && !secondService && !terms) {
        $alert({
          title: 'âš ï¸ ì„œë¹„ìŠ¤ ì„ íƒ ëˆ„ë½',
          text: 'ì„œë¹„ìŠ¤ ì„ íƒ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.\nì²˜ìŒë¶€í„° ë‹¤ì‹œ ì„ íƒí•´ì£¼ì„¸ìš”.',
          icon: 'warning'
        }).then(() => {
          location.href = '/forms';
        });
        return;
      }
      
      // ì„ íƒëœ ì„œë¹„ìŠ¤ ì •ë³´ í‘œì‹œ
      console.log('ğŸ“‹ ì„ íƒëœ ì„œë¹„ìŠ¤ ì •ë³´:');
      console.log('ì„œë¹„ìŠ¤1 (ë‹¤ì¤‘ì„ íƒ):', firstServices);
      console.log('ì„œë¹„ìŠ¤2 (ë‹¨ì¼ì„ íƒ):', secondService);
      console.log('ë™ì˜í•œ ì•½ê´€:', terms.split(','));
      console.log('ë°ì´í„° ì†ŒìŠ¤:', queryFirstServices ? 'ì¿¼ë¦¬íŒŒë¼ë¯¸í„°' : 'sessionStorage');
      
      // ì…€í”„ ì§ì˜ ê³µì‚¬ ì—¬ë¶€ ì²´í¬
      const selfWorkInputs = document.querySelectorAll('input[name="selfWork"]');
      selfWorkInputs.forEach(input => {
        input.addEventListener('change', function() {
          const bizInfoGroup = document.getElementById('bizInfoGroup');
          if (this.value === 'N') {
            bizInfoGroup.style.display = 'block';
          } else {
            bizInfoGroup.style.display = 'none';
            document.querySelector('input[name="bizName"]').value = '';
          }
        });
      });
      
      // ì‹ ì²­ì¸ê³¼ ë™ì¼ ì—¬ë¶€ ì²´í¬
      const residentSameInputs = document.querySelectorAll('input[name="residentSame"]');
      residentSameInputs.forEach(input => {
        input.addEventListener('change', function() {
          const residentInfoGroup = document.getElementById('residentInfoGroup');
          const residentNameInput = document.querySelector('input[name="residentName"]');
          const residentTelInput = document.querySelector('input[name="residentTel"]');
          
          if (this.value === 'Y') {
            const applicantName = document.querySelector('input[name="name"]').value;
            const applicantTel = document.querySelector('input[name="tel"]').value;
            
            residentNameInput.value = applicantName;
            residentTelInput.value = applicantTel;
            residentNameInput.disabled = true;
            residentTelInput.disabled = true;
          } else {
            residentNameInput.disabled = false;
            residentTelInput.disabled = false;
          }
        });
      });
      
      // ì‹ ì²­ì¸ ì •ë³´ ë³€ê²½ ì‹œ ì„¸ëŒ€ì£¼ ì •ë³´ ë™ê¸°í™”
      const applicantNameInput = document.querySelector('input[name="name"]');
      const applicantTelInput = document.querySelector('input[name="tel"]');
      
      [applicantNameInput, applicantTelInput].forEach(input => {
        input.addEventListener('input', function() {
          const residentSameChecked = document.querySelector('input[name="residentSame"]:checked');
          if (residentSameChecked && residentSameChecked.value === 'Y') {
            if (this.name === 'name') {
              document.querySelector('input[name="residentName"]').value = this.value;
            } else if (this.name === 'tel') {
              document.querySelector('input[name="residentTel"]').value = this.value;
            }
          }
        });
      });
      
      // ì „í™”ë²ˆí˜¸ ìˆ«ìë§Œ ì…ë ¥
      const telInputs = document.querySelectorAll('input[type="tel"]');
      telInputs.forEach(input => {
        input.addEventListener('input', function() {
          this.value = this.value.replace(/[^0-9]/g, '');
        });
      });
      
      // ë™ì˜ì„œ ì¡°ê±´ í™•ì¸ì— ë”°ë¥¸ ë™ì˜ì„œ ì¡°ê±´ í•„ìˆ˜ ì—¬ë¶€ í† ê¸€
      const agreementConditionInputs = document.querySelectorAll('input[name="agreementConditionCheck"]');
      agreementConditionInputs.forEach(input => {
        input.addEventListener('change', function() {
          const agreementTermsInput = document.querySelector('textarea[name="agreementTerms"]');
          // ë™ì˜ì„œ ì¡°ê±´ ë¼ë²¨ì—ì„œ required í´ë˜ìŠ¤ í† ê¸€ - id="agreementTermsLabel"
          const agreementTermsLabel = document.getElementById('agreementTermsLabel');

          if (this.value === 'N') {
            // ë¯¸í™•ì¸ ì„ íƒ ì‹œ - ë™ì˜ì„œ ì¡°ê±´ í•„ìˆ˜ ì•„ë‹˜
            agreementTermsInput.removeAttribute('required');
            agreementTermsLabel.classList.remove('required');
            console.log('âŒ ë¯¸í™•ì¸ - ë™ì˜ì„œ ì¡°ê±´ í•„ìˆ˜ í•´ì œ');
          } else {
            // í™•ì¸ì™„ë£Œ ì„ íƒ ì‹œ - ë™ì˜ì„œ ì¡°ê±´ í•„ìˆ˜
            agreementTermsInput.setAttribute('required', 'required');
            agreementTermsLabel.classList.add('required');
            console.log('âœ… í™•ì¸ì™„ë£Œ - ë™ì˜ì„œ ì¡°ê±´ í•„ìˆ˜');
          }
        });
      });
      
      // ìŠ¹ê°•ê¸° ì™¸ë¶€ ë³´ì–‘ì—¬ë¶€ì— ë”°ë¥¸ ì‹œê³µ ì¸µìˆ˜ ì…ë ¥ë€ í† ê¸€
      const elevatorProtectionInputs = document.querySelectorAll('input[name="elevatorProtection"]');
      elevatorProtectionInputs.forEach(input => {
        input.addEventListener('change', function() {
          const elevatorFloorsGroup = document.getElementById('elevatorFloorsGroup');
          const elevatorFloorsInput = document.querySelector('input[name="elevatorFloors"]');
          
          if (this.value === 'Y') {
            // ì˜ˆ ë˜ëŠ” ê´€ë¦¬ì‚¬ë¬´ì†Œ ì¡°ê±´ëŒ€ë¡œ ì„ íƒ ì‹œ - ì‹œê³µ ì¸µìˆ˜ ì…ë ¥ë€ í‘œì‹œ
            elevatorFloorsGroup.style.display = 'block';
            console.log('âœ… ìŠ¹ê°•ê¸° ì™¸ë¶€ ë³´ì–‘ í•„ìš” - ì‹œê³µ ì¸µìˆ˜ ì…ë ¥ë€ í‘œì‹œ');
          } else {
            // ì•„ë‹ˆì˜¤ ë˜ëŠ” ê´€ë¦¬ì‚¬ë¬´ì†Œ ì¡°ê±´ëŒ€ë¡œ ì„ íƒ ì‹œ - ì‹œê³µ ì¸µìˆ˜ ì…ë ¥ë€ ìˆ¨ê¹€ ë° ê°’ ì´ˆê¸°í™”
            elevatorFloorsGroup.style.display = 'none';
            elevatorFloorsInput.value = '';
            console.log('âŒ ìŠ¹ê°•ê¸° ì™¸ë¶€ ë³´ì–‘ ë¶ˆí•„ìš” - ì‹œê³µ ì¸µìˆ˜ ì…ë ¥ë€ ìˆ¨ê¹€');
          }
        });
      });
      
      // ê¸°ì¡´ í—ˆê°€ ì—¬ë¶€ì— ë”°ë¥¸ í—ˆê°€ ì •ë³´ ì…ë ¥ë€ í† ê¸€
      const existingPermitInputs = document.querySelectorAll('input[name="existingPermit"]');
      existingPermitInputs.forEach(input => {
        input.addEventListener('change', function() {
          const existingPermitInfoGroup = document.getElementById('existingPermitInfoGroup');
          const existingPermitInfoInput = document.querySelector('textarea[name="existingPermitInfo"]');
          
          if (this.value === 'Y') {
            // ì˜ˆ ì„ íƒ ì‹œ - ê¸°ì¡´ í—ˆê°€ ì •ë³´ ì…ë ¥ë€ í‘œì‹œ
            existingPermitInfoGroup.style.display = 'block';
            console.log('âœ… ê¸°ì¡´ í—ˆê°€ ìˆìŒ - í—ˆê°€ ì •ë³´ ì…ë ¥ë€ í‘œì‹œ');
          } else {
            // ì•„ë‹ˆì˜¤ ì„ íƒ ì‹œ - ê¸°ì¡´ í—ˆê°€ ì •ë³´ ì…ë ¥ë€ ìˆ¨ê¹€ ë° ê°’ ì´ˆê¸°í™”
            existingPermitInfoGroup.style.display = 'none';
            existingPermitInfoInput.value = '';
            console.log('âŒ ê¸°ì¡´ í—ˆê°€ ì—†ìŒ - í—ˆê°€ ì •ë³´ ì…ë ¥ë€ ìˆ¨ê¹€');
          }
        });
      });
      
      // Flatpickr ë‹¤ì¤‘ ë‚ ì§œ ì„ íƒê¸° ì´ˆê¸°í™”
      flatpickr("#noiseDatePicker", {
        mode: "multiple",
        dateFormat: "Y-m-d",
        locale: "ko",
        placeholder: "ì†ŒìŒì´ ë°œìƒí•  ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”",
        allowInput: false,
        clickOpens: true,
        minDate: "today",
        maxDate: new Date().fp_incr(365), // 1ë…„ í›„ê¹Œì§€
        conjunction: ", ",
        onChange: function(selectedDates, dateStr, instance) {
          console.log('ì„ íƒëœ ì†ŒìŒ ë°œìƒì¼:', dateStr);
        },
        onReady: function(selectedDates, dateStr, instance) {
          // ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼ ì ìš©
          instance.calendarContainer.classList.add('noise-date-calendar');
        }
      });
    });
    
    // ì£¼ì†Œ ê²€ìƒ‰ íŒì—…
    function openAddressSearch() {
      new daum.Postcode({
        oncomplete: function(data) {
          document.querySelector('input[name="address"]').value = data.address;
        }
      }).open();
    }
    
    // í¼ ì œì¶œ
    function submitForm() {
      const form = document.getElementById('detailForm');
      const formData = new FormData(form);
      
      // ë°ì´í„° ê°€ì ¸ì˜¤ê¸° - ë‘ ê°€ì§€ ë°©ì‹ ì§€ì›
      let firstServices, secondService, terms;
      
      // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì—ì„œ ë¨¼ì € í™•ì¸
      const urlParams = new URLSearchParams(window.location.search);
      firstServices = urlParams.get('firstServices') || sessionStorage.getItem('firstServices');
      secondService = urlParams.get('secondService') || sessionStorage.getItem('secondService');
      terms = urlParams.get('terms') || sessionStorage.getItem('terms');
      
      formData.append('firstServices', firstServices); // ë°°ì—´ í˜•íƒœë¡œ ì „ì†¡
      formData.append('secondService', secondService);
      formData.append('terms', terms);
      
      // ìœ íš¨ì„± ê²€ì‚¬
      if (!validateForm(formData)) {
        return;
      }
      
      // ğŸ’ ì„œë²„ë¡œ ì „ì†¡ - Forms ì „ìš© AJAX í•¨ìˆ˜ ì‚¬ìš©
      formsAjax('', 'POST', formData)
      .then(data => {
        console.log('ğŸ“‹ ì„¤ë¬¸ ë“±ë¡ ì‘ë‹µ:', data);
        
        if (data.success) {
          // ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ í´ë¦¬ì–´
          sessionStorage.removeItem('firstServices');
          sessionStorage.removeItem('secondService');
          sessionStorage.removeItem('terms');
          
          // ì„±ê³µ ì•Œë¦¼ (SweetAlert2 ì‚¬ìš©)
          $alert({
            title: 'ë“±ë¡ ì™„ë£Œ',
            text: 'ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.',
            icon: 'success',
            confirmButtonText: 'ì™„ë£Œ í˜ì´ì§€ë¡œ'
          }).then(() => {
            // ì™„ë£Œ í˜ì´ì§€ë¡œ ì´ë™
            location.href = '/forms/complete';
          });
        } else {
          $alert({
            title: 'âŒ ë“±ë¡ ì‹¤íŒ¨',
            text: data.message || 'ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
            icon: 'error'
          });
        }
      })
      .catch(error => {
        console.error('ë“±ë¡ ì˜¤ë¥˜:', error);
        $alert({
          title: 'ì„œë²„ ì˜¤ë¥˜',
          text: 'ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\nì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
          icon: 'error'
        });
      });
    }
    
    // í¼ ìœ íš¨ì„± ê²€ì‚¬
    function validateForm(formData) {
      // ê³µí†µ ì–‘ì‹ í•„ìˆ˜ í•„ë“œ ê²€ì‚¬ë§Œ ì ìš©
      const requiredFields = ['stdDate', 'endDate', 'address', 'detailAddress', 'name', 'tel'];
      
      for (let field of requiredFields) {
        if (!formData.get(field)) {
          $alert({
            title: 'âš ï¸ í•„ìˆ˜ ì…ë ¥ ëˆ„ë½',
            text: 'ê³µí†µ í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.',
            icon: 'warning'
          });
          return false;
        }
      }
      
      // ì „í™”ë²ˆí˜¸ í˜•ì‹ ê²€ì‚¬
      const tel = formData.get('tel');
      const telRegex = /^01[016789]\d{7,8}$/;
      if (!telRegex.test(tel)) {
        $alert({
          title: 'ğŸ“± ì „í™”ë²ˆí˜¸ í˜•ì‹ ì˜¤ë¥˜',
          text: 'ì˜¬ë°”ë¥¸ ì „í™”ë²ˆí˜¸ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\nì˜ˆ: 01012345678',
          icon: 'warning'
        });
        return false;
      }
      
      // ì„¸ëŒ€ì£¼ ì •ë³´ ìœ íš¨ì„± ê²€ì‚¬ (ì…ì£¼ë¯¼ë™ì˜ì„œ ì„ íƒ ì‹œ)
      const firstServices = formData.get('firstServices');
      if (firstServices && firstServices.includes('1')) {
        // ê´€ë¦¬ì‚¬ë¬´ì†Œ ì¡°ê±´ í™•ì¸ ë¼ë””ì˜¤ ë²„íŠ¼ ì„ íƒ ê²€ì‚¬
        const agreementConditionCheck = document.querySelector('input[name="agreementConditionCheck"]:checked');
        if (!agreementConditionCheck) {
          $alert({
            title: 'âš ï¸ ê´€ë¦¬ì‚¬ë¬´ì†Œ ì¡°ê±´ í™•ì¸ ëˆ„ë½',
            text: 'ê´€ë¦¬ì‚¬ë¬´ì†Œ ì¡°ê±´ í™•ì¸ ì—¬ë¶€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.',
            icon: 'warning'
          });
          return false;
        }
        // í™•ì¸ ì„ íƒ ì‹œ ë™ì˜ì„œ ì¡°ê±´ í•„ìˆ˜ ê²€ì‚¬
        if (agreementConditionCheck.value === 'Y') {
          const agreementTerms = formData.get('agreementTerms');
          if (!agreementTerms) {
            $alert({
              title: 'âš ï¸ ë™ì˜ì„œ ì¡°ê±´ ëˆ„ë½',
              text: 'ë™ì˜ì„œ ì¡°ê±´ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.',
              icon: 'warning'
            });
            return false;
          }
        }
        
        const residentName = document.querySelector('input[name="residentName"]')?.value;
        const residentTel = document.querySelector('input[name="residentTel"]')?.value;
        
        if (!residentName || !residentTel) {
          $alert({
            title: 'âš ï¸ ì„¸ëŒ€ì£¼ ì •ë³´ ëˆ„ë½',
            text: 'ì„¸ëŒ€ì£¼ëª…ê³¼ ì„¸ëŒ€ì£¼ ì „í™”ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.',
            icon: 'warning'
          });
          return false;
        }
        
        // ì„¸ëŒ€ì£¼ ì „í™”ë²ˆí˜¸ í˜•ì‹ ê²€ì‚¬
        if (!telRegex.test(residentTel)) {
          $alert({
            title: 'ğŸ“± ì„¸ëŒ€ì£¼ ì „í™”ë²ˆí˜¸ í˜•ì‹ ì˜¤ë¥˜',
            text: 'ì˜¬ë°”ë¥¸ ì„¸ëŒ€ì£¼ ì „í™”ë²ˆí˜¸ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\nì˜ˆ: 01012345678',
            icon: 'warning'
          });
          return false;
        }
      }
      
      // ê³µì‚¬ ê¸°ê°„ ê²€ì‚¬
      // const stdDate = new Date(formData.get('stdDate'));
      // const endDate = new Date(formData.get('endDate'));
      // if (stdDate >= endDate) {
      //   $alert({
      //     title: 'ğŸ“… ë‚ ì§œ ì„¤ì • ì˜¤ë¥˜',
      //     text: 'ê³µì‚¬ ì¢…ë£Œì¼ì€ ì‹œì‘ì¼ë³´ë‹¤ ë’¤ì—¬ì•¼ í•©ë‹ˆë‹¤.',
      //     icon: 'warning'
      //   });
      //   return false;
      // }
      
      return true;
    }
  </script>
</body>
</html>